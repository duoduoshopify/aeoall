{{ 'component-footer.css' | asset_url | stylesheet_tag }}

<footer class="footer">
  <div class="page-width">
    <div class="footer-grid">
      <!-- A. 品牌信息 -->
      <div class="footer-col-info">
        <div class="footer-logo">{{ shop.name | upcase }}.</div>
        <div class="footer-bio">{{ section.settings.bio }}</div>
        {%- if section.settings.show_social -%}
          <div class="footer-socials">{% render 'social-icons' %}</div>
        {%- endif -%}
      </div>

      <!-- B. 动态菜单列 -->
      {%- for block in section.blocks -%}
        <div class="footer-col-menu" {{ block.shopify_attributes }}>
          <h4 class="footer-heading">{{ block.settings.heading }}</h4>
          <ul class="footer-menu-list">
            {%- for link in block.settings.menu.links -%}
              <li>
                <a href="{{ link.url }}">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endfor -%}

      <!-- C. 订阅区域 -->
      {%- if section.settings.newsletter_enable -%}
        <div class="footer-col-newsletter">
          <h4 class="footer-heading">{{ section.settings.newsletter_heading }}</h4>
          <div class="footer-newsletter-text">{{ section.settings.newsletter_text }}</div>
          {%- form 'customer', class: 'footer-newsletter-form' -%}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="footer-newsletter-input-wrapper">
              <input
                type="email"
                name="contact[email]"
                class="footer-newsletter-input"
                value="{{ form.email }}"
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="email"
                {% if form.errors %}
                  autofocus
                  aria-invalid="true"
                  aria-describedby="ContactFooter-error"
                {% elsif form.posted_successfully? %}
                  aria-describedby="ContactFooter-success"
                {% endif %}
                placeholder="Email address"
                required
              >
              <button type="submit" class="footer-newsletter-button" name="commit" id="Subscribe">
                JOIN
              </button>
            </div>
            {%- if form.errors -%}
              <small class="footer__newsletter-error" id="ContactFooter-error">{% render 'icon-error' %}{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</small>
            {%- endif -%}
            {%- if form.posted_successfully? -%}
              <h3 class="footer__newsletter-success" id="ContactFooter-success" tabindex="-1" autofocus>{% render 'icon-success' %}{{ 'newsletter.success' | t }}</h3>
            {%- endif -%}
          {%- endform -%}
        </div>
      {%- endif -%}
    </div>

    <!-- D. 底部版权与支付图标 -->
    <div class="footer-bottom">
      <div class="footer-copyright">
        &copy; {{ 'now' | date: "%Y" }} {{ shop.name }}. All Rights Reserved.
      </div>
      <div class="payment-icons">
        {%- for type in shop.enabled_payment_types -%}
          {{ type | payment_type_svg_tag: class: 'icon icon--full-color' }}
        {%- endfor -%}
      </div>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "max_blocks": 4,
  "settings": [
    { "type": "textarea", "id": "bio", "label": "Brand Bio", "default": "Revolutionizing ergonomic science." },
    { "type": "checkbox", "id": "newsletter_enable", "label": "Show Newsletter", "default": true },
    { "type": "text", "id": "newsletter_heading", "label": "Newsletter Heading", "default": "Insider Access" },
    { "type": "richtext", "id": "newsletter_text", "label": "Newsletter Text" },
    { "type": "checkbox", "id": "show_social", "label": "Show Social Links", "default": true },
    { "type": "checkbox", "id": "enable_language_selector", "label": "Language Selector", "default": true },
    { "type": "checkbox", "id": "enable_currency_selector", "label": "Currency Selector", "default": false }
  ],
  "blocks": [
    {
      "type": "menu",
      "name": "Footer Menu",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Quick Links" },
        { "type": "link_list", "id": "menu", "label": "Menu" }
      ]
    }
  ]
}
{% endschema %}
