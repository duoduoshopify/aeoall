{% comment %}
  Cart Footer - Totals and Checkout
{% endcomment %}

<div class="cart-footer" data-section="{{ section.id }}">
  <div class="cart-footer__inner">
    {%- if section.settings.show_cart_note -%}
      <div class="cart-note">
        <label for="cart-note">{{ 'sections.cart.note' | t }}</label>
        <textarea id="cart-note" name="note" placeholder="{{ 'sections.cart.note_placeholder' | t }}">{{ cart.note }}</textarea>
      </div>
    {%- endif -%}

    <div class="cart-totals">
      <div class="cart-totals__subtotal">
        <span>{{ 'sections.cart.subtotal' | t }}</span>
        <span class="cart-totals__subtotal-value">{{ cart.total_price | money }}</span>
      </div>

      {%- if cart.cart_level_discount_applications.size > 0 -%}
        <div class="cart-totals__discounts">
          {%- for discount in cart.cart_level_discount_applications -%}
            <div class="cart-totals__discount">
              <span>{{ discount.title }}</span>
              <span>-{{ discount.total_allocated_amount | money }}</span>
            </div>
          {%- endfor -%}
        </div>
      {%- endif -%}

      <p class="cart-totals__note">{{ 'sections.cart.taxes_and_shipping_policy_at_checkout_html' | t }}</p>

      <button type="submit" 
              name="checkout" 
              class="cart-footer__checkout button button--primary"
              form="cart-form">
        {{ 'sections.cart.checkout' | t }}
      </button>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Cart Footer",
  "class": "section-cart-footer",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_cart_note",
      "label": "Show cart note",
      "default": true
    }
  ]
}
{% endschema %}
