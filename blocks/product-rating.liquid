<div class="product-rating" {{ block.shopify_attributes }}>
  {%- if product.metafields.reviews.rating.value != blank -%}
    {%- assign rating_value = product.metafields.reviews.rating.value | round: 1 -%}
    {%- assign rating_count = product.metafields.reviews.rating_count | default: 0 -%}
    <div
      class="rating-stars"
      role="img"
      aria-label="{{ 'general.accessibility.star_reviews_info' | t: rating_value: rating_value, rating_max: 5 }}"
    >
      <span class="stars-filled" aria-hidden="true">★★★★★</span>
      <span class="visually-hidden">{{ 'general.accessibility.star_reviews_info' | t: rating_value: rating_value, rating_max: 5 }}</span>
      <span class="rating-value" aria-hidden="true">{{ rating_value }}</span>
      <span class="rating-count" aria-label="{{ 'general.accessibility.total_reviews' | t }}: {{ rating_count }}">({{ rating_count }})</span>
    </div>
  {%- else -%}
    <div
      class="rating-stars--empty"
      role="img"
      aria-label="{{ 'general.accessibility.star_reviews_info' | t: rating_value: 0, rating_max: 5 }}"
    >
      <span aria-hidden="true">★★★★★</span>
      <span class="visually-hidden">{{ 'general.accessibility.star_reviews_info' | t: rating_value: 0, rating_max: 5 }}</span>
      <span class="rating-count" aria-label="{{ 'general.accessibility.total_reviews' | t }}: 0">(0)</span>
    </div>
  {%- endif -%}
</div>

<style>
  .product-rating { display: flex; align-items: center; gap: 1rem; font-size: 2.5rem; color: #ffb800; margin-bottom: 1rem; }
  .rating-value { color: rgb(var(--color-text)); font-weight: 700; }
  .rating-count { color: rgba(var(--color-text), 0.4); font-size: 1.2rem; }
  .rating-stars--empty { color: #e5e7eb; }
</style>

{% schema %}
{ "name": "Product Rating" }
{% endschema %}