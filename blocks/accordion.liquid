{% comment %}
  Accordion Block - 折叠面板
{% endcomment %}

{%- liquid
  assign heading = block.settings.heading
  assign content = block.settings.content
  assign open_by_default = block.settings.open_by_default
-%}

<details class="accordion" {{ block.shopify_attributes }} {% if open_by_default %}open{% endif %}>
  <summary class="accordion__summary">
    <span class="accordion__title">{{ heading }}</span>
    <span class="accordion__icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </span>
  </summary>
  <div class="accordion__content rte">
    {{ content }}
  </div>
</details>

<style>
  .accordion {
    border: 1px solid rgb(var(--color-border));
    border-radius: 8px;
    margin-bottom: 1rem;
    overflow: hidden;
  }

  .accordion__summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 2rem;
    cursor: pointer;
    user-select: none;
    list-style: none;
    background: rgb(var(--color-background));
    transition: background-color 0.2s;
  }

  .accordion__summary::-webkit-details-marker {
    display: none;
  }

  .accordion__summary:hover {
    background: rgb(var(--color-background-secondary));
  }

  .accordion__title {
    font-size: 1.6rem;
    font-weight: 600;
  }

  .accordion__icon {
    display: flex;
    transition: transform 0.3s;
  }

  .accordion__icon svg {
    width: 20px;
    height: 20px;
  }

  .accordion[open] .accordion__icon {
    transform: rotate(180deg);
  }

  .accordion__content {
    padding: 0 2rem 2rem;
    animation: accordion-open 0.3s ease;
  }

  @keyframes accordion-open {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

{% schema %}
{
  "name": "Accordion",
  "class": "accordion-block",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Accordion Title"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>Add your content here</p>"
    },
    {
      "type": "checkbox",
      "id": "open_by_default",
      "label": "Open by default",
      "default": false
    }
  ]
}
{% endschema %}
